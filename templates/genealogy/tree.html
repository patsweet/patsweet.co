{% extends "base.html" %}
{% load staticfiles %}
{% block maincontent %}
<br>
<div class="row">
  <div class="small-12 columns">
    <canvas id="springydemo" width="920px" height="600px" />
  </div>
</div>
{% endblock maincontent %}

{% block extrajs %}
  <script type="text/javascript" charset="utf-8" src="{% static "springy/springy.js" %}"></script>
  <script type="text/javascript" charset="utf-8" src="{% static "springy/springyui.js" %}"></script>
  <script type="text/javascript" charset="utf-8">
    var graphJSON = {
      "nodes": [
        {% for familymember in family %}
          "{{ familymember.full_name }}"{% if not forloop.last %},{% endif %}
        {% endfor %}
      ],
      "edges": [
        {% for familymember in family %}
          {% if familymember.father %}
          ["{{ familymember.father.full_name }}", "{{ familymember.full_name }}"],
          {% endif %}
          {% if familymember.mother %}
            ["{{ familymember.mother.full_name }}", "{{ familymember.full_name }}"],
          {% endif %}
        {% endfor %}
      ]
    };

    jQuery(function(){
      var graph = new Springy.Graph();
      graph.loadJSON(graphJSON);

      var springy = jQuery('#springydemo').springy({
        graph: graph
      });
    });

  </script>
{% endblock extrajs %}
